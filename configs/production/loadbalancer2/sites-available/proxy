# -*- text -*-
##
## proxy -- proxy requests to backend RADIUS servers
##

server proxy {
    listen {
        type = auth
        ipaddr = 0.0.0.0  # Bind to all interfaces for internal access
        port = 1816
    }

    listen {
        type = acct
        ipaddr = 0.0.0.0  # Bind to all interfaces for internal access
        port = 1817
    }

    authorize {
        preprocess
        # Force all requests to be proxied to backend servers
        update control {
            &Proxy-To-Realm := "DEFAULT"
        }
    }

    authenticate {
        # Authentication is handled by backend servers via proxy
    }

    preacct {
        # Pre-accounting processing
        preprocess
        # Force accounting packets to be proxied to backend servers
        update control {
            &Proxy-To-Realm := "DEFAULT"
        }
    }

    accounting {
        # Accounting is handled by backend servers via proxy
        # The proxy.conf realm configuration will handle load balancing
    }

    pre-proxy {
        # Log the request before forwarding
    }

    post-proxy {
        # Log the response after receiving from backend
    }
}
